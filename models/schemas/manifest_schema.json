{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Master Manifest Schema",
  "type": "object",
  "required": ["manifest_version", "system_name", "models", "relationships", "ai_runtime"],
  "properties": {
    "manifest_version": { "type": "string" },
    "system_name": { "type": "string" },
    "description": { "type": "string" },

    "models": {
      "type": "object",
      "required": [
        "knowledge_graph",
        "api_contract",
        "digital_twin",
        "master_system_model"
      ],
      "properties": {
        "knowledge_graph": {
          "type": "object",
          "required": ["id", "path"],
          "properties": {
            "id": { "type": "string" },
            "path": { "type": "string" },
            "description": { "type": "string" }
          },
          "additionalProperties": true
        },
        "api_contract": {
          "type": "object",
          "required": ["id", "path"],
          "properties": {
            "id": { "type": "string" },
            "path": { "type": "string" },
            "description": { "type": "string" }
          },
          "additionalProperties": true
        },
        "digital_twin": {
          "type": "object",
          "required": ["id", "path"],
          "properties": {
            "id": { "type": "string" },
            "path": { "type": "string" },
            "description": { "type": "string" }
          },
          "additionalProperties": true
        },
        "master_system_model": {
          "type": "object",
          "required": ["id", "path"],
          "properties": {
            "id": { "type": "string" },
            "path": { "type": "string" },
            "description": { "type": "string" }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },

    "relationships": {
      "type": "object",
      "properties": {
        "knowledge_graph_based_on": { "type": "string" },
        "digital_twin_derives_from": {
          "type": "array",
          "items": { "type": "string" }
        },
        "api_contract_exposes": {
          "type": "array",
          "items": { "type": "string" }
        },
        "ai_runtime_requires": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "additionalProperties": true
    },

    "ai_runtime": {
      "type": "object",
      "properties": {
        "embedding_strategy": {
          "type": "object",
          "properties": {
            "chunk_size_chars": { "type": "integer" },
            "overlap_chars": { "type": "integer" },
            "index_priority": {
              "type": "array",
              "items": { "type": "string" }
            },
            "metadata_fields": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "additionalProperties": true
        },
        "prompt_router": {
          "type": "object",
          "properties": {
            "routes": {
              "type": "object",
              "additionalProperties": { "type": "string" }
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },

    "integrity": {
      "type": "object",
      "properties": {
        "consistency_checks": {
          "type": "object",
          "properties": {
            "cross_reference": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },

    "metadata": {
      "type": "object",
      "properties": {
        "generated_at": { "type": "string" },
        "author": { "type": "string" },
        "schema_version": { "type": "string" }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
